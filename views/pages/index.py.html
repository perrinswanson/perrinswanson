
% rebase('base.py', title='Perrin Swanson')

<div id="background"></div>
<script>
    const sizes = Array.prototype.concat(
        Array(20).fill(1),
        Array(10).fill(2),
        Array(3).fill(3),
        Array(2).fill(4),
        Array(1).fill(5)
    );
    const colours = Array.prototype.concat(
        Array(10).fill("#FFFFFF"),
        Array(1).fill("#FFFAB8"),
        Array(1).fill("#FFAA3B"),
        Array(1).fill("#C40000"),
        Array(1).fill("#abfff4")
    );
    const alphaSpeeds = Array.prototype.concat(
        Array(20).fill(1),
        Array(2).fill(2),
        Array(2).fill(4),
        Array(1).fill(5)
    );
    const movementSpeeds = Array.prototype.concat(
        Array(20).fill(1),
        Array(5).fill(2),
        Array(3).fill(5),
        Array(1).fill(10)
    );
    
    class Star {
        constructor(element, shouldUpdateOpacity, shouldUpdatePosition) {
            this.element = element;
            this.shouldUpdateOpacity = shouldUpdateOpacity;
            this.shouldUpdatePosition = shouldUpdatePosition;
            this.reset(false);
        }
        
        reset(end) {
            this.size = sizes[Math.floor(Math.random() * sizes.length)] / 2;
            this.colour = colours[Math.floor(Math.random() * colours.length)];
            this.movementSpeed = alphaSpeeds[Math.floor(Math.random() * alphaSpeeds.length)];
            this.alphaSpeed = movementSpeeds[Math.floor(Math.random() * movementSpeeds.length)];
            
            if (end) {
                this.left = screen.width + 10;
            } else {
                this.left = Math.floor(Math.random() * screen.width);
            }
            this.alpha = Math.random();
            this.increaseAlpha = Math.random() < 0.5;
            
            this.element.style.width = this.size + "px";
            this.element.style.height = this.size + "px";
            this.element.style.borderRadius = (this.size / 2) + "px";
            this.element.style.opacity = this.alpha;
            
            this.element.style.left = this.left + "px";
            this.element.style.top = Math.floor(Math.random() * screen.height) + "px";
            
            this.element.style.backgroundColor = this.colour;
            this.element.style.boxShadow = "0px 0px " + this.size + "px " + this.size + "px " + this.colour;
        }
        
        updateOpacity() {
            if (this.increaseAlpha) {
                this.alpha += this.alphaSpeed / 2000;
            } else {
                this.alpha -= this.alphaSpeed / 2000;
            }
            
            if (this.alpha < 0) {
                this.alpha = 0;
                this.increaseAlpha = true;
            }
            if (this.alpha > 1) {
                this.alpha = 1;
                this.increaseAlpha = false;
            }
            this.element.style.opacity = this.alpha;
        }
        
        updatePosition() {
            this.left -= this.movementSpeed / 10;
            
            if (this.left < -10) {
                this.reset(true);
            } else {
                this.element.style.left = Math.floor(this.left) + "px";
            }
        }
    }
    
    const min = screen.width / 6
    const max = screen.width / 3
    const count = min + (Math.random() * (max - min))
    
    const stars = []
    const backgroundElement = document.getElementById("background")
    
    for (i = 0; i < count; i++) {
        const element = document.createElement("div")
        element.className = "star"
        const shouldUpdateOpacity = Math.random() < 0.6
        const shouldUpdatePosition = Math.random() < 0.4
        
        stars.push(new Star(element, shouldUpdateOpacity, shouldUpdatePosition))
        
        backgroundElement.appendChild(element)
    }
    
    setInterval(function() {
        for (star of stars) {
            if (star.shouldUpdateOpacity) {
                star.updateOpacity()
            }
            if (star.shouldUpdatePosition) {
                star.updatePosition()
            }
        }
    }, 5)
</script>

<div id="main">
    <div class="section">
        <h1>Perrin Swanson</h1>
        <p class="secondary-text">Software developer by day, musician by night (and sometimes vice versa)</p>
    </div>
    
    <div class="section">
        <h2>Check out my work!</h2>
        <div>
            <a href="https://bctracker.ca">BCTracker</a>
            <span class="secondary-text">• Full stack developer</span>
        </div>
        <div>
            <a href="https://salussafety.io">SALUS</a>
            <span class="secondary-text">• iOS developer</span>
        </div>
    </div>
    
    <div class="section">
        <h2>Check out my music!</h2>
        <a href="https://perrinswanson.bandcamp.com/">Bandcamp</a>
        <a href="https://soundcloud.com/perrinswanson">Soundcloud</a>
    </div>
    
    <div class="section">
        <h2>Say hello!</h2>
        <a href="mailto:perrinswanson@gmail.com">perrinswanson<wbr />@gmail.com</a>
        <a href="https://www.instagram.com/perrinswanson/">Instagram</a>
        <a href="https://ca.linkedin.com/in/perrin-swanson-468b30109">LinkedIn</a>
    </div>
</div>
